Auto-Generate Template Feature: Implementation Plan                                                                                            
                                                                                                                                                 
  Overview                                                                                                                                       
                                                                                                                                                 
  Add functionality to the Project Detail page allowing users to auto-generate an interview template with questions based on the project's       
  metadata (Description, Research Objectives, Target Audience, Context Type, Strategic Context).                                                 
                                                                                                                                                 
  ---                                                                                                                                            
  UX Flow                                                                                                                                        
                                                                                                                                                 
  Project Detail Page                                                                                                                            
         â”‚                                                                                                                                       
         â–¼                                                                                                                                       
  [âœ¨ Generate Template] button (next to "New Template")                                                                                         
         â”‚                                                                                                                                       
         â–¼                                                                                                                                       
  â—Œ Loading state (spinner with "Generating template...")                                                                                        
         â”‚                                                                                                                                       
         â–¼                                                                                                                                       
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                                
  â”‚  Preview Modal                              â”‚                                                                                                
  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                                                                                                
  â”‚  Template Name: [editable]                  â”‚                                                                                                
  â”‚  Objective: [editable]                      â”‚                                                                                                
  â”‚                                             â”‚                                                                                                
  â”‚  Generated Questions:                       â”‚                                                                                                
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                                                                                                 
  â”‚  â”‚ 1. [Question text]         [open â–¼] â”‚   â”‚                                                                                                 
  â”‚  â”‚    Guidance: [editable]             â”‚   â”‚                                                                                                 
  â”‚  â”‚    [ğŸ—‘ï¸ Remove]                       â”‚   â”‚                                                                                                
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                                                                                                 
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                                                                                                 
  â”‚  â”‚ 2. [Question text]         [scale â–¼]â”‚   â”‚                                                                                                 
  â”‚  â”‚    Guidance: [editable]             â”‚   â”‚                                                                                                 
  â”‚  â”‚    Scale: 1-10                       â”‚   â”‚                                                                                                
  â”‚  â”‚    [ğŸ—‘ï¸ Remove]                       â”‚   â”‚                                                                                                
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                                                                                                 
  â”‚  ... (5-10 questions)                      â”‚                                                                                                 
  â”‚                                             â”‚                                                                                                
  â”‚  [+ Add Question]                           â”‚                                                                                                
  â”‚                                             â”‚                                                                                                
  â”‚  [ğŸ”„ Regenerate]  [Cancel]  [Create Template]â”‚                                                                                               
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                                
                                                                                                                                                 
  ---                                                                                                                                            
  UX Considerations                                                                                                                              
  Consideration: Button placement                                                                                                                
  Decision: Header actions, next to "New Template"                                                                                               
  Rationale: Discoverable but doesn't overshadow manual creation                                                                                 
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                                                       
  Consideration: Empty fields                                                                                                                    
  Decision: Show warning if key fields empty, still allow generation                                                                             
  Rationale: Some context is better than none; let AI work with what's available                                                                 
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                                                       
  Consideration: Preview before save                                                                                                             
  Decision: Required via modal                                                                                                                   
  Rationale: Users must review AI output before it becomes a real template                                                                       
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                                                       
  Consideration: Editability                                                                                                                     
  Decision: Full inline editing in preview                                                                                                       
  Rationale: Users can tweak generated content without starting over                                                                             
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                                                       
  Consideration: Regenerate option                                                                                                               
  Decision: Button in preview modal                                                                                                              
  Rationale: If output is poor, regenerate without closing modal                                                                                 
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                                                       
  Consideration: Question count                                                                                                                  
  Decision: AI generates 5-8 questions by default                                                                                                
  Rationale: Enough to cover research objectives without overwhelming                                                                            
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                                                       
  Consideration: Question types                                                                                                                  
  Decision: AI chooses appropriate types                                                                                                         
  Rationale: Based on question intent (scale for ratings, open for exploration)                                                                  
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                                                       
  Consideration: Loading time                                                                                                                    
  Decision: Show spinner + estimated wait                                                                                                        
  Rationale: Set expectations (typically 3-5 seconds)                                                                                            
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                                                       
  Consideration: Error handling                                                                                                                  
  Decision: Toast with retry option                                                                                                              
  Rationale: Network/API failures gracefully handled                                                                                             
  ---                                                                                                                                            
  Technical Implementation                                                                                                                       
                                                                                                                                                 
  1. Backend API Endpoint                                                                                                                        
                                                                                                                                                 
  File: server/routes.ts                                                                                                                         
                                                                                                                                                 
  Endpoint: POST /api/projects/:projectId/generate-template                                                                                      
                                                                                                                                                 
  Request: Empty body (uses project data from DB)                                                                                                
                                                                                                                                                 
  Response:                                                                                                                                      
  {                                                                                                                                              
    name: string;           // Suggested template name                                                                                           
    objective: string;      // Interview objective                                                                                               
    tone: string;           // Suggested tone                                                                                                    
    questions: Array<{                                                                                                                           
      questionText: string;                                                                                                                      
      questionType: "open" | "yes_no" | "scale" | "numeric" | "multi_select";                                                                    
      guidance: string;                                                                                                                          
      scaleMin?: number;                                                                                                                         
      scaleMax?: number;                                                                                                                         
      multiSelectOptions?: string[];                                                                                                             
      timeHintSeconds?: number;                                                                                                                  
      recommendedFollowUps?: number;                                                                                                             
    }>;                                                                                                                                          
  }                                                                                                                                              
                                                                                                                                                 
  Implementation logic:                                                                                                                          
  1. Authenticate user + verify project access                                                                                                   
  2. Fetch project with all fields                                                                                                               
  3. Validate project has at least name (warn if key fields empty)                                                                               
  4. Build prompt with project context                                                                                                           
  5. Call OpenAI API with JSON mode                                                                                                              
  6. Parse and validate response                                                                                                                 
  7. Return generated template data (NOT saved yet)                                                                                              
                                                                                                                                                 
  ---                                                                                                                                            
  2. AI Prompt Structure                                                                                                                         
                                                                                                                                                 
  System prompt:                                                                                                                                 
  You are an expert research interview designer. Generate interview templates                                                                    
  that elicit rich, actionable insights from respondents.                                                                                        
                                                                                                                                                 
  Output JSON with this exact structure:                                                                                                         
  {                                                                                                                                              
    "name": "Template name based on research focus",                                                                                             
    "objective": "1-2 sentence interview objective",                                                                                             
    "tone": "professional|friendly|empathetic|neutral",                                                                                          
    "questions": [                                                                                                                               
      {                                                                                                                                          
        "questionText": "The question to ask",                                                                                                   
        "questionType": "open|yes_no|scale|numeric|multi_select",                                                                                
        "guidance": "Instructions for the AI interviewer on what to probe",                                                                      
        "scaleMin": 1,  // only if scale type                                                                                                    
        "scaleMax": 10, // only if scale type                                                                                                    
        "multiSelectOptions": [], // only if multi_select type                                                                                   
        "timeHintSeconds": 60,                                                                                                                   
        "recommendedFollowUps": 2                                                                                                                
      }                                                                                                                                          
    ]                                                                                                                                            
  }                                                                                                                                              
                                                                                                                                                 
  Guidelines:                                                                                                                                    
  - Generate 5-8 questions covering the research objectives                                                                                      
  - Start with rapport-building, end with wrap-up/future questions                                                                               
  - Use "open" type for exploratory questions (most common)                                                                                      
  - Use "scale" for satisfaction/rating questions                                                                                                
  - Use "yes_no" sparingly for filtering questions                                                                                               
  - Write guidance that helps probe deeper on key themes                                                                                         
  - Match tone to the project's specified tone                                                                                                   
                                                                                                                                                 
  User prompt:                                                                                                                                   
  Generate an interview template for this research project:                                                                                      
                                                                                                                                                 
  PROJECT NAME: {name}                                                                                                                           
  DESCRIPTION: {description}                                                                                                                     
  RESEARCH OBJECTIVES: {objective}                                                                                                               
  TARGET AUDIENCE: {audienceContext}                                                                                                             
  CONTEXT TYPE: {contextType}                                                                                                                    
  STRATEGIC CONTEXT: {strategicContext}                                                                                                          
  PREFERRED TONE: {tone}                                                                                                                         
                                                                                                                                                 
  Focus questions on achieving the research objectives while keeping the                                                                         
  target audience in mind. The context type is "{contextType}" so frame                                                                          
  questions appropriately for {contextType} research.                                                                                            
                                                                                                                                                 
  ---                                                                                                                                            
  3. Frontend Components                                                                                                                         
                                                                                                                                                 
  File: client/src/pages/project-detail.tsx                                                                                                      
                                                                                                                                                 
  Changes:                                                                                                                                       
  1. Add "Generate Template" button in header actions                                                                                            
  2. Add state for generation loading/preview modal                                                                                              
  3. Import and render GenerateTemplateModal component                                                                                           
                                                                                                                                                 
  New file: client/src/components/GenerateTemplateModal.tsx                                                                                      
                                                                                                                                                 
  Component structure:                                                                                                                           
  interface GeneratedTemplate {                                                                                                                  
    name: string;                                                                                                                                
    objective: string;                                                                                                                           
    tone: string;                                                                                                                                
    questions: GeneratedQuestion[];                                                                                                              
  }                                                                                                                                              
                                                                                                                                                 
  interface GenerateTemplateModalProps {                                                                                                         
    projectId: string;                                                                                                                           
    projectName: string;                                                                                                                         
    open: boolean;                                                                                                                               
    onClose: () => void;                                                                                                                         
    onSuccess: (templateId: string) => void;                                                                                                     
  }                                                                                                                                              
                                                                                                                                                 
  function GenerateTemplateModal({ ... }) {                                                                                                      
    const [isGenerating, setIsGenerating] = useState(false);                                                                                     
    const [generatedTemplate, setGeneratedTemplate] = useState<GeneratedTemplate | null>(null);                                                  
    const [editedTemplate, setEditedTemplate] = useState<GeneratedTemplate | null>(null);                                                        
                                                                                                                                                 
    // Generate API call                                                                                                                         
    const handleGenerate = async () => { ... };                                                                                                  
                                                                                                                                                 
    // Create template from edited data                                                                                                          
    const handleCreate = async () => { ... };                                                                                                    
                                                                                                                                                 
    // Render states: generating, preview/edit, error                                                                                            
  }                                                                                                                                              
                                                                                                                                                 
  ---                                                                                                                                            
  4. Data Flow                                                                                                                                   
                                                                                                                                                 
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                             
  â”‚ 1. User clicks "Generate Template"                             â”‚                                                                             
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                             
                                â”‚                                                                                                                
                                â–¼                                                                                                                
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                             
  â”‚ 2. POST /api/projects/:projectId/generate-template             â”‚                                                                             
  â”‚    - Fetches project data                                      â”‚                                                                             
  â”‚    - Builds prompt with project context                        â”‚                                                                             
  â”‚    - Calls OpenAI API (gpt-4o or gpt-5-mini)                  â”‚                                                                              
  â”‚    - Returns generated template JSON                           â”‚                                                                             
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                             
                                â”‚                                                                                                                
                                â–¼                                                                                                                
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                             
  â”‚ 3. Preview modal opens with editable template                  â”‚                                                                             
  â”‚    - User can edit name, objective, questions                  â”‚                                                                             
  â”‚    - User can add/remove questions                             â”‚                                                                             
  â”‚    - User can regenerate if unsatisfied                        â”‚                                                                             
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                             
                                â”‚                                                                                                                
                                â–¼                                                                                                                
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                             
  â”‚ 4. User clicks "Create Template"                               â”‚                                                                             
  â”‚    POST /api/projects/:projectId/templates (existing endpoint) â”‚                                                                             
  â”‚    - Saves template + questions to database                    â”‚                                                                             
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                             
                                â”‚                                                                                                                
                                â–¼                                                                                                                
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                             
  â”‚ 5. Navigate to /templates/:newTemplateId                       â”‚                                                                             
  â”‚    - User lands on template detail page                        â”‚                                                                             
  â”‚    - Can further edit or launch a collection                   â”‚                                                                             
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                             
                                                                                                                                                 
  ---                                                                                                                                            
  Files to Create/Modify                                                                                                                         
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 
  â”‚                      File                       â”‚ Action â”‚                           Description                           â”‚                 
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 
  â”‚ server/routes.ts                                â”‚ Modify â”‚ Add POST /api/projects/:projectId/generate-template endpoint    â”‚                 
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 
  â”‚ server/template-generator.ts                    â”‚ Create â”‚ AI logic for generating templates (similar to Barbara patterns) â”‚                 
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 
  â”‚ client/src/pages/project-detail.tsx             â”‚ Modify â”‚ Add Generate button, modal state, import modal                  â”‚                 
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 
  â”‚ client/src/components/GenerateTemplateModal.tsx â”‚ Create â”‚ Preview/edit modal for generated template                       â”‚                 
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 
  ---                                                                                                                                            
  Edge Cases & Error Handling                                                                                                                    
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              
  â”‚                Scenario                â”‚                               Handling                               â”‚                              
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              
  â”‚ Project has no description/objectives  â”‚ Show warning banner in modal, generate anyway with available context â”‚                              
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              
  â”‚ OpenAI API timeout                     â”‚ Show error toast with "Retry" button                                 â”‚                              
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              
  â”‚ OpenAI returns malformed JSON          â”‚ Catch parse error, show "Generation failed, please retry"            â”‚                              
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              
  â”‚ User closes modal mid-generation       â”‚ Abort request, no side effects                                       â”‚                              
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              
  â”‚ Generated questions have invalid types â”‚ Validate and default to "open" type                                  â”‚                              
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              
  â”‚ User creates template but API fails    â”‚ Show error, keep modal open with data intact                         â”‚                              
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              
  ---                                                                                                                                            
  Configuration                                                                                                                                  
                                                                                                                                                 
  Add to BarbaraConfig (or create separate config):                                                                                              
  templateGeneration: {                                                                                                                          
    model: "gpt-4o" | "gpt-5-mini",  // gpt-4o recommended for quality                                                                           
    maxQuestions: 8,                                                                                                                             
    minQuestions: 5,                                                                                                                             
  }                                                                                                                                              
                                                                                                                                                 
  ---                                                                                                                                            
  Future Enhancements (Out of Scope)                                                                                                             
                                                                                                                                                 
  - Save generation history for comparison                                                                                                       
  - "Improve this template" feature for existing templates                                                                                       
  - Generate questions for specific audience segments                                                                                            
  - A/B template generation (generate two versions)                                                                                              
                                                                                                                                                 
  ---                                                                                                                                            
  This plan provides a complete path from user click to saved template while maintaining user control through the preview/edit step. The         
  implementation follows existing patterns in the codebase (Barbara orchestrator for AI, existing template creation endpoint for saving). 